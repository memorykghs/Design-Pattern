# 11 - 蠅量/享元模式 ( Flyweight )

## Flyweight Pattern 
Flyweight 原本是拳擊術語，指最輕量的級別，蠅量 ( 享元 ) 模式單看文字可能有點難理解，但簡單來說就是共享元件 ( 資源 )。

假設現在在玩俄羅斯方塊，他們的形狀不外乎就是幾種。

當畫面上重複出現某個圖形時，必須記錄該圖案的位置以及旋轉方向，那麼你可能會這樣寫：

試想一個情節：公司裡每個人都會有員工資訊，也都會有名片。假設名片是個類別時，對於每個員工，都需要 new 出名片的實體，而實際上名片裡也只是內容不同而已。當員工越多時，就需要 new 出越多名片物件，造成記憶體浪費，這時候就適合使用享元模式。

蠅量模式可以想成是對象池的一種實現。類似於執行緒池，執行緒池可以避免不停的創建和銷毀多個對象而消耗性能。
享元模式提供了減少對象數量從而改善應用所需的對象結構的方式。

## UML

## 實際應用

## 實作

## 小結

* 適用場景：
  * 當一個類別會在執行時期產生多個實例，且他們的控制方法相同時。
  * 也就是系統有大量相似對象、需要緩衝池的場景。

#### 優點
* 減少執行時期的物件數量，節省記憶體。
* 減少記憶體之外的其他資源的佔用。

#### 缺點
* 需要關注內部狀態和外部狀態，關注執行緒安全問題。
* 使系統、程式的邏輯複雜化。
* 一般設置成享元工廠，而享元工廠大部分情況設置成單例，因為快取存放在一個地方。

## 參考